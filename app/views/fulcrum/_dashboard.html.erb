<h1>Individual</h1>
<ul>
<li>email:<%= current_user.email %></li>
<% user = User.find_by(email: current_user.email) %>
<li>User:<%= (user.present?) ? "#{user.id} (#{user.name})" : '0 (guest)' %></li>
<% individual = Individual.find_by(email: current_user.email) %>
<li>Individual:<%= (individual.present?) ? "#{individual.id} (#{individual.name})" : 'n/a' %></li>
</ul>
<h2>Instituions</h2>
<ul>
  <% current_institutions.each do |institution| %>
    <li>Institution:<%= "#{institution.id} (#{institution.name})" %></li>
  <% end %>
</ul>
<h2>Keycard</h2>
<ul>
  <% Services.request_attributes.for(request).all.each do |key, value| %>
    <li><%= key.to_s %>: <%= value.to_s %></li>
  <% end %>
</ul>
<h2>Incognito</h2>
<form name="incognito" method="get" action="<%= fulcrum_partials_path(:dashboard) %>">
  <input type="checkbox" id="actor" name="actor" value="sudo" <%= Incognito.sudo_actor?(current_actor) ? 'checked' : '' %>>
  <b>Incognito</b>.sudo_actor? -> <b>true</b><br>
  <ul>
    <li>
      <b>Incognito</b>.sudo_actor_individual
      <%= select_tag "individual_id", options_for_select(@individuals, Incognito.sudo_actor_individual(current_actor)&.id), include_blank: '' %>
      filter by
      <input type="text" id="individual_filter" name="individual_filter" value=<%= params['individual_filter'] %>>
      <button>filter</button>
    </li>
    <li>
      <b>Incognito</b>.sudo_actor_institution
      <%= select_tag "institution_id", options_for_select(@institutions, Incognito.sudo_actor_institution(current_actor)&.id), include_blank: '' %>
      filter by
      <input type="text" id="institution_filter" name="institution_filter" value=<%= params['institution_filter'] %>>
      <button>filter</button>
    </li>
    <li>
      <b>Products</b>
      <% Incognito.sudo_actor_products(current_actor).each do |product| %>
        <ul>
          <li><%= link_to "#{product.identifier} (#{product.name})", product %></li>
        </ul>
      <% end %>
    </li>
  </ul>
  <input type="checkbox" id="platform_admin" name="platform_admin" value="mask" <%= !Incognito.allow_platform_admin?(current_actor) ? 'checked' : '' %>>
  <b>Incognito</b>.allow_platform_admin? -> <b>false</b><br>
  <input type="checkbox" id="hyrax_can" name="hyrax_can" value="mask" <%= !Incognito.allow_hyrax_can?(current_actor) ? 'checked' : '' %>>
  <b>Incognito</b>.allow_hyrax_can? -> <b>false</b><br>
  <input type="checkbox" id="action_permitted" name="action_permitted" value="mask" <%= !Incognito.allow_action_permitted?(current_actor) ? 'checked' : '' %>>
  <b>Incognito</b>.allow_action_permitted? -> <b>false</b><br>
  &nbsp;<br>
  <button name="submit" type="submit" value="incognito">Incognito</button>
</form>
<h2>Token</h2>
<%= text_field(:user, :token, size: 120, value: current_user.token, disabled: true) %>
