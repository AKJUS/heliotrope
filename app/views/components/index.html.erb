<p id="notice"><%= notice %></p>
<div id="maincontent">
  <% if @product.present? %>
    <h1>Product <%= link_to @product.id, product_path(@product) %> Components</h1>
  <% else %>
    <h1>Components</h1>
  <% end %>
  <b>
    <div class="col-md-10">
      <div class="col-md-1">ID</div>
      <div class="col-md-6"><div>Identifier</div><div>Name</div></div>
      <div class="col-md-1">FileSet</div>
      <div class="col-md-2">Monograph</div>
      <div class="col-md-1">Products</div>
    </div>
    <div class="col-md-2"><%= link_to 'New Component', new_component_path %></div>
    <div class="col-md-12"><hr/></div>
  </b>
  <% @components.each do |component| %>
    <%
      entity = Sighrax.factory(component.noid)
      monograph_id = 0
      file_set_id = 0
      if entity.is_a?(Sighrax::Monograph)
        monograph = entity
        monograph_id = entity.noid
      else
        file_set = entity
        file_set_id = entity.noid
        monograph = file_set.parent
        monograph_id = monograph.noid
      end
    %>
    <div class="col-md-10">
      <div class="col-md-1"><%= component.id %></div>
      <div class="col-md-6"><div><%= component.identifier %></div><div><%= component.name %></div>&nbsp;</div>
      <div class="col-md-1">&nbsp;<%= link_to_if file_set.present?, file_set_id, hyrax_file_set_path(file_set_id) %></div>
      <div class="col-md-2">&nbsp;<%= link_to_if monograph.present?, monograph_id, hyrax_monograph_path(monograph_id) %></div>
      <div class="col-md-1">&nbsp;<%= link_to component.products.count, component_products_path(component) %></div>
    </div>
    <div class="col-md-2">
      <div class="col-md-4"><%= link_to 'Show', component %></div>
      <div class="col-md-4"><%= link_to_if component.update?, 'Edit', edit_component_path(component) %></div>
      <div class="col-md-4"><%= link_to_if component.destroy?, 'Destroy', component, method: :delete, data: { confirm: 'Are you sure?' } %></div>
    </div>
  <% end %>
  <div class="col-md-12">&nbsp<%= paginate @components %></div>
</div>
